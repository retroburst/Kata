@using Kata.LoanPrediction.CSharp.Common.Models
@using Kata.LoanPrediction.CSharp.MVC.Application

@model Kata.LoanPrediction.CSharp.MVC.Models.LoanCalculationResultsModel

@{
    ViewBag.Title = "Results";
}

<p><br /></p>
<div class="jumbotron">
    <h1>Results.</h1>
    <p>
        Loan ends on @RazorViewHelpers.FormatDate(Model.Output.LoanEndsDate)<br />
        Total interest paid from @RazorViewHelpers.FormatDate(Model.Output.InterestStartDate) is @RazorViewHelpers.FormatCurrency(Model.Output.TotalInterestPaid)<br />
        @if (Model.Output.TargetEndDateHit)
        {
            <text>>Target end date @RazorViewHelpers.FormatDate(Model.Context.TargetEndDate) was hit perfectly!</text>
        }
        else
        {
            <text>Target end date @RazorViewHelpers.FormatDate(Model.Context.TargetEndDate) was missed by <u>@Model.Output.TargetEndDateMissedInDays</u> days!</text>
        }
    </p>
</div>

<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Credit</th>
            <th>Debit</th>
            <th>Balance</th>
        </tr>
    </thead>
    @foreach (LoanTransaction transaction in Model.Output.Transactions)
    {
        <tr>
            <td>@RazorViewHelpers.FormatDate(transaction.Date)</td>
            <td>@RazorViewHelpers.FormatTransactionType(transaction.Type)</td>
            <td class="success">@RazorViewHelpers.FormatCurrency(transaction.Credit)</td>
            <td class="danger">@RazorViewHelpers.FormatCurrency(transaction.Debit)</td>
            <td>@RazorViewHelpers.FormatCurrency(transaction.Balance)</td>
        </tr>
    }
</table>