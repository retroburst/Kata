@using Kata.LoanPrediction.CSharp.Common.Models
@using Kata.LoanPrediction.CSharp.MVC.Application

@model Kata.LoanPrediction.CSharp.MVC.Models.LoanCalculationResultsModel

@{
    ViewBag.Title = "Loan Prediction Results";
}

<div class="jumbotron">
    <h1>Calculations Completed.</h1>
    <h3>Loan ends on @RazorViewHelpers.FormatDate(Model.Output.LoanEndsDate)</h3>
    <h3>Total interest paid from @RazorViewHelpers.FormatDate(Model.Output.InterestStartDate) is @RazorViewHelpers.FormatCurrency(Model.Output.TotalInterestPaid)</h3>
    @if (Model.Output.TargetEndDateHit)
    {
        <h3>Target end date @RazorViewHelpers.FormatDate(Model.Context.TargetEndDate) was hit perfectly!</h3>
    }
    else
    {
        <h3>Target end date @RazorViewHelpers.FormatDate(Model.Context.TargetEndDate) was missed by <u>@Model.Output.TargetEndDateMissedInDays</u> days!</h3>
    }
</div>


<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Credit</th>
            <th>Debit</th>
            <th>Balance</th>
        </tr>
    </thead>
    @foreach(LoanTransaction transaction in Model.Output.Transactions)
    {
        <tr>
            <td>@RazorViewHelpers.FormatDate(transaction.Date)</td>
            <td>@RazorViewHelpers.FormatTransactionType(transaction.Type)</td>
            <td class="success">@RazorViewHelpers.FormatCurrency(transaction.Credit)</td>
            <td class="danger">@RazorViewHelpers.FormatCurrency(transaction.Debit)</td>
            <td>@RazorViewHelpers.FormatCurrency(transaction.Balance)</td>
        </tr>
    }
</table>